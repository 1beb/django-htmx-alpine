{% load static %}<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon"
          type="image/png"
          href="{% static 'img/favicon.ico' %}">

    <title>{% block title %}{% endblock title %} - HTMX & Alpine.JS</title>

    {% block meta_description %}
      <meta name="description"{% if meta_description_content %}
            description="{{ meta_description_content }}"{% else %}
            description="A demo that demonstrates how HTMX and Alpine.JS can work together"{% endif %}>
    {% endblock meta_description %}

    {% block meta_robots %}
      <meta name="robots"{% if norobots %}
            content="noindex, nofollow"{% else %}
            content="index, follow"{% endif %}>
    {% endblock meta_robots %}

    {# css #}
    <link rel="stylesheet"
          type="text/css"
          href="https://cdn.jsdelivr.net/npm/bulma@0.9.2/css/bulma.min.css">
    <link rel="stylesheet"
          type="text/css"
          href="{% static 'css/base.css' %}">

    <style>
      {% block style %}{% endblock style %}
    </style>

    {# javascript - head #}
    {% block head_start_script %}{% endblock head_start_script %}
    {% include 'helpers.html' %}
    <script type="text/javascript"
            src="https://unpkg.com/alpinejs@3.1.1/dist/cdn.min.js"
            defer></script>
    {{ USER_ANALYTICS_SCRIPT|safe }}
    {% block head_end_script %}{% endblock head_end_script %}

  </head>

  <body>
    {% block body_start_script %}{% endblock body_start_script %}
    <script>
      document.addEventListener('alpine:init', () => {
        Alpine.store('config', {
          userIsAuthenticated: {{ user.is_authenticated|yesno:'true,false' }} 
        })
      });
    </script>

    <div id="page-container">
      {% include 'navbar_main.html' %}
      {% include 'ie11_notice.html' %}
      {% include 'status_message.html' %}

      <noscript>
        <div class="my-4 is-size-5 has-text-danger has-text-centered">
          This page requires Javascript to function correctly.
        </div>
      </noscript>

      <main class="w-100 container is-flex-grow-1 has-background-light-grey">

        <section class="mt-4 has-text-centered" aria-label="title">
          <h1 class="title">
            {% block body_title %}{% endblock body_title %}
          </h1>
          <h2 class="subtitle">
            {% block body_subtitle %}{% endblock body_subtitle %}
          </h2>
        </section>

        <div class="pt-4 section" aria-label="content">
          {% block content %}{% endblock content %}
        </div>

      </main>
      {% include 'footer.html' %}
    </div>


    {# javascript - body #}
    <script type="text/javascript"
            src="https://unpkg.com/htmx.org@1.4.1"
            integrity="sha384-1P2DfVFAJH2XsYTakfc6eNhTVtyio74YNA1tc6waJ0bO+IfaexSWXc2x62TgBcXe"
            crossorigin="anonymous"></script>
    {% block body_end_script %}{% endblock body_end_script %}

    <script>
      // add CSRFToken to HTMX headers
      document.body.addEventListener('htmx:configRequest', (event) => {
        event.detail.headers['X-CSRFToken'] = '{{ csrf_token }}';
      })
    </script>

	</body>
</html>
