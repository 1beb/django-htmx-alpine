{% extends 'base.html' %}

{% block title %}Todo List{% endblock title %}

{% block body_title %}Todo List{% endblock body_title %}
{% block body_subheading %}{% endblock body_subheading %}

{% block content %}

<h4>Create New Task</h4>

<form hx-post="{% url 'tasks:task_create' %}"
      hx-vals='javascript:{"description": taskCreate()}'
      hx-target="#tasks"
      hx-swap="beforeend">
  <input type="text" id="new-task-input-text">
  <input type="submit" value="Create">
</form>
<br>

<script>
  function taskCreate() {
    // get the value of the text input, clear it,
    // and return the value that was in the form
    let el = document.querySelector("#new-task-input-text");
    let result = el.value;
    el.value = '';
    return result;
  }
</script>

<h4>Your Tasks:</h4>
{% if tasks %}
  {% include 'tasks/list_task.html' %}
{% else %}
  <p>
    <em>No tasks created</em>
  </p>
{% endif %}

{% endblock content %}
