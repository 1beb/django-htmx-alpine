<li id="list-item-{{ task.id }}"
    class="mx-auto task-item-container-parent">

  <!-- task completion checkbox -->
  <div class="task-item-container-checkbox">
    <input type="checkbox" {{ task.is_complete|yesno:'checked,' }}
           class="p-2 checkbox is-medium"
           autocomplete="off"
           id="checkbox-task-complete-{{ task.id }}"
           hx-put="{% url 'tasks:task_update' task_id=task.id %}"
           hx-vals='{
             "is_complete": "{{ task.is_complete|yesno:"false,true" }}"}'
           hx-target="#list-item-{{ task.id }}"
           hx-swap="outerHTML">
  </div>

  <!-- task description -->
  <div id="text-item-description-{{ task.id }}"
       class="mw-20rem task-item-container-description cursor-pointer
            {% if task.is_complete %}
              text-strikethrough has-text-grey-light
            {% endif %}"
       title="Task ID#: {{ task.id }}"
       hx-put="{% url 'tasks:task_update' task_id=task.id %}"
       hx-vals='{"is_complete": "{{ task.is_complete|yesno:'false,true' }}"}'
       hx-target="#list-item-{{ task.id }}"
       hx-swap="outerHTML">
    {{ task.description }}
  </div>

  <!-- task update div -->
  <div id="update-div-{{ task.id }}" class="is-hidden">
    <form id="task-update-form-{{ task.id }}"
          hx-put="{% url 'tasks:task_update' task_id=task.id %}"
          hx-vals="javascript:{'description': updateConfirm({{ task.id }})}"
          hx-target="#list-item-{{ task.id }}"
          hx-swap="outerHTML">
      <input type="text"
             id="task-update-input-text-{{ task.id }}"
             class="mr-0 input is-small is-inline button-group-left-side"
             value="{{ task.description }}">
      <input type="submit"
             class="ml-0 button is-info is-inline is-small
                    button-group-right-side"
             id="update-confirm-button-{{ task.id }}"
             title="Confirm"
             value="&check;"> <!-- confirm icon -->
    </form>
  </div>

  <!-- task edit/delete icons -->
  <div class="task-item-container-icons is-size-4"
       x-data="{ itemDeleteModal{{ task.id }}IsActive: false }">
    <div id="icon-task-edit-{{ task.id }}"
          class="p-2 cursor-pointer has-text-weight-bold"
          onclick="updateDivToggle({{ task.id }})"
          title="Edit">
      &#9998; <!-- edit icon -->
    </div>
    <div id="icon-task-delete-{{ task.id }}"
          class="ml-2 p-2 cursor-pointer has-text-weight-bold"
          title="Delete"
          @click="itemDeleteModal{{ task.id }}IsActive = true;">
      &times; <!-- delete icon -->
    </div>

    <!-- item delete modal -->
    <template x-if="itemDeleteModal{{ task.id }}IsActive">
      <div id="item-delete-modal-{{ task.id }}"
           class="modal is-active outline-none"
           tabindex="-1"
           x-show.transition.opacity.duration.500ms="
             itemDeleteModal{{ task.id }}IsActive"
           @keyup.enter.window="itemDelete{{ task.id }}()"
           @keyup.escape.window="itemDeleteModal{{ task.id }}IsActive = false">
        <div class="modal-background"></div>
        <div class="modal-content">
          <div class="p-0 section">
            <div @click.away="itemDeleteModal{{ task.id }}IsActive = false"
                 class="px-5 pt-2 pb-5 box is-flex is-flex-direction-column
                        is-justify-content-center is-align-items-center
                        has-text-centered">

              <div class="my-3 is-size-4">Delete Item</div>

              <div class="is-size-6 has-text-centered">
                Are you sure you want to delete this item?
              </div>

              <div class="mt-5 is-flex is-justify-content-space-between">
                <button class="button is-block is-danger is-medium is-fullwidth"
                   @click="
                      ">
                  Delete
                </button>
                <button class="ml-4 button is-block is-light
                               is-medium is-fullwidth"
                        @click="itemDeleteModal{{ task.id }}IsActive = false">
                  Cancel
                </button>
              </div>

            </div>
          </div>
          <button class="modal-close is-large" aria-label="close"></button>
        </div>

      </div>
    </template>

  </div>

</li>

<script>
function itemDelete{{ task.id }}() {
  htmx.ajax('DELETE', '{% url 'tasks:task_delete' task_id=task.id %}', {
    target: '#tasks'
  });
}
</script>
